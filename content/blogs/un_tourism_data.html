---
categories:  
- ""    #the front matter should be like the one found in, e.g., blog2.md. It cannot be like the normal Rmd we used
- ""
date: "2021-09-30"
description: UN Tourism Data # the title that will show up once someone gets to this page
draft: false
image: tourism.jpeg # save picture in \static\img\blogs. Acceptable formats= jpg, jpeg, or png . Your iPhone pics wont work

keywords: ""
slug: UN_Tourism_Data # slug is the shorthand URL address... no spaces plz
title: UN Tourism Data
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="data-cleaning" class="section level2">
<h2>Data cleaning</h2>
<pre class="r"><code>url &lt;- &quot;https://data.un.org/_Docs/SYB/CSV/SYB63_176_202003_Tourist-Visitors%20Arrival%20and%20Expenditure.csv&quot;

un_tourism_data &lt;- fread(input = url,
                         skip=1) %&gt;% 
  clean_names() %&gt;% 
  rename(country = v2) %&gt;% 
  select(-c(1,5,6,8,9))


tourism_wide &lt;-  un_tourism_data %&gt;% 
    pivot_wider(names_from = &quot;series&quot;,
              values_from = &quot;value&quot;) %&gt;% 
  clean_names() %&gt;% 
  rename(
    tourism_expenditure = tourism_expenditure_millions_of_us_dollars ,
    tourist_arrivals = tourist_visitor_arrivals_thousands    
  )



tourism_wide &lt;- tourism_wide %&gt;% 
  filter(!is.na(tourism_expenditure), 
         !is.na(tourist_arrivals))


# create new variable that calculates spending per tourist
tourism_wide &lt;- tourism_wide %&gt;% 
  mutate(spending_per_tourist = 1000*tourism_expenditure/tourist_arrivals)



tourism_long &lt;- tourism_wide %&gt;% 
  pivot_longer(cols = 3:5, #columns 3 to 5
               names_to = &quot;indicator&quot;,
               values_to = &quot;value&quot;)

# Turn `indicator` from character to a factor variable
tourism_long &lt;- tourism_long %&gt;% 
  mutate(
    indicator = factor(indicator, 
                       levels = c(&quot;tourist_arrivals&quot;, &quot;tourism_expenditure&quot;, &quot;spending_per_tourist&quot;),
                       labels = c(&quot;Tourist Arrivals (000s)&quot;, &quot;Tourism Expenditure (million $)&quot;, &quot;Spending per tourist($)&quot;))
  )</code></pre>
</div>
<div id="explore-the-relationship-between-tourist-arrivals-and-spending" class="section level2">
<h2>Explore the relationship between tourist arrivals and spending</h2>
<div id="apac-region" class="section level3">
<h3>Apac region</h3>
<pre class="r"><code>tourism_long %&gt;% 
  filter(country %in% c(&quot;Japan&quot;, &quot;Australia&quot;, &quot;Korea&quot;, &quot;China, Hong Kong SAR&quot;, &quot;Singapore&quot;, &quot;China&quot;)) %&gt;% 
  ggplot(aes(x=year, y = value, colour=country))+
  geom_line()+
  geom_point(size=0.5)+
  facet_grid(rows = vars(indicator),
             cols = vars(country), 
             scales = &quot;free&quot;)+
  theme_bw()+
  theme(legend.position = &quot;none&quot;)+
  scale_y_continuous(labels = scales::label_comma())+
  labs(
    title = &quot;Tourist Arrivals and Spending&quot;,
    caption = &quot;Source: UN&quot;,
    x = &quot;&quot;,
    y = &quot;&quot;
  )</code></pre>
<p><img src="/blogs/un_tourism_data_files/figure-html/tourist%20arrivals%20and%20spending-1.png" width="672" /></p>
</div>
<div id="europe-region" class="section level3">
<h3>Europe region</h3>
<pre class="r"><code>tourism_long %&gt;% 
  filter(country %in% c(&quot;United Kingdom&quot;, &quot;Austria&quot;, &quot;France&quot;, &quot;Germany&quot;, &quot;Italy&quot;, &quot;Spain&quot;)) %&gt;% 
  ggplot(aes(x=year, y = value, colour=country))+
  geom_line()+
  geom_point(size=0.5)+
  facet_grid(rows = vars(indicator),
             cols = vars(country), 
             scales = &quot;free&quot;)+
  theme_bw()+
  theme(legend.position = &quot;none&quot;)+
  scale_y_continuous(labels = scales::label_comma())+
  labs(
    title = &quot;Tourist Arrivals and Spending&quot;,
    caption = &quot;Source: UN&quot;,
    x = &quot;&quot;,
    y = &quot;&quot;
  )</code></pre>
<p><img src="/blogs/un_tourism_data_files/figure-html/tourist%20arrivals%20and%20spending_1-1.png" width="672" /></p>
</div>
</div>
<div id="calculate-growth-rates-starting-for-each-country-at-1-or-100" class="section level1">
<h1>Calculate growth rates, starting for each country at 1 (or 100%)</h1>
<pre class="r"><code>tourism_wide2 &lt;- tourism_wide  %&gt;% 
  group_by(country) %&gt;%
  mutate(
    delta_arrivals = (tourist_arrivals / lag(tourist_arrivals,1)),
    delta_expenditure = (tourism_expenditure/lag(tourism_expenditure,1 )), 
    delta_spending_per_tourist = (spending_per_tourist/lag(spending_per_tourist,1))
  ) %&gt;% 
  replace_na(list(
    delta_arrivals = 1,
    delta_expenditure = 1,
    delta_spending_per_tourist = 1
  )) %&gt;% 
  ungroup() %&gt;% 
  select(country, year, delta_arrivals, delta_expenditure, delta_spending_per_tourist)

# wide to long
tourism_long2 &lt;- tourism_wide2 %&gt;% 
  pivot_longer(cols = 3:5, #columns 3 to 5
               names_to = &quot;indicator&quot;,
               values_to = &quot;value&quot;)</code></pre>
<div id="plot-changes-with-1100-as-starting-point-for-each-country" class="section level2">
<h2>Plot % changes, with 1=100% as starting point for each country</h2>
<pre class="r"><code>tourism_long2 %&gt;% 
  filter(country %in% c(&quot;Japan&quot;, &quot;Australia&quot;, &quot;Korea&quot;, &quot;China, Hong Kong SAR&quot;, &quot;Singapore&quot;, &quot;China&quot;,&quot;United Kingdom&quot;, &quot;Austria&quot;, &quot;France&quot;, &quot;Germany&quot;, &quot;Italy&quot;, &quot;Spain&quot;)) %&gt;% 
  ggplot(aes(x=year, y = value, colour=country))+
  geom_line()+
  geom_point(size=0.5)+
  facet_grid(rows = vars(indicator),
             cols = vars(country), 
             scales = &quot;free&quot;)+
  theme_bw()+
  theme(legend.position = &quot;none&quot;)+
  scale_y_continuous(labels = scales::label_percent())+
  labs(
    title = &quot;Changes in Tourist Arrivals and Spending in Apac and Europe regions——taking 10 countries as examples&quot;,
    subtitle = &quot;Base year (100%) = 1995&quot;,
    caption = &quot;Source: UN&quot;,
    x = &quot;&quot;,
    y = &quot;&quot;
  )</code></pre>
<p><img src="/blogs/un_tourism_data_files/figure-html/plotchanges-1.png" width="672" /></p>
</div>
</div>
