---
categories:  
- ""    #the front matter should be like the one found in, e.g., blog2.md. It cannot be like the normal Rmd we used
- ""
date: "2021-09-30"
description: London Bike Rentals and London weather # the title that will show up once someone gets to this page
draft: false
image: bike1.jpeg # save picture in \static\img\blogs. Acceptable formats= jpg, jpeg, or png . Your iPhone pics wont work

keywords: ""
slug: London_bike # slug is the shorthand URL address... no spaces plz
title: London Bike Rentals and London weather
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<pre class="r"><code>knitr::opts_chunk$set(
  message = FALSE, 
  warning = FALSE, 
  tidy=FALSE,     # display code as typed
  size=&quot;small&quot;)   # slightly smaller font for code
options(digits = 3)

# default figure size
knitr::opts_chunk$set(
  fig.width=6.75, 
  fig.height=6.75,
  fig.align = &quot;center&quot;
)</code></pre>
<pre><code>





## Import and inspect the datafile

The first step is to import the data into R. We will use either `readr::read_csv()` or `vroom::vroom()`-- I prefer the latter as it is a lot faster. Once you import any datafile, make sure the first thing you do is  use `janitor::clean_names()`


```r
bike_weather &lt;- vroom(here::here(&quot;data&quot;,&quot;london_bikes.csv&quot;)) %&gt;% 
  janitor::clean_names() %&gt;% 
  mutate(month = lubridate::month(day, label = TRUE),
         weekday = lubridate::wday(day, label=TRUE)
  )</code></pre>
<p>Having imported the datafame, we need to inspect it to see what kind of variables it contains, whether there are any missing values, etc.</p>
<pre class="r"><code>skimr::skim(bike_weather)</code></pre>
<table style="width: auto;" class="table table-condensed">
<caption>
(#tab:inspect_dataframe)Data summary
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
bike_weather
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
3959
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
25
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
character
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
factor
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
POSIXct
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
min
</th>
<th style="text-align:right;">
max
</th>
<th style="text-align:right;">
empty
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:right;">
whitespace
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
prcp_attributes
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:left;">
ordered
</th>
<th style="text-align:right;">
n_unique
</th>
<th style="text-align:left;">
top_counts
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
month
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Jan: 341, Mar: 341, May: 341, Aug: 341
</td>
</tr>
<tr>
<td style="text-align:left;">
weekday
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Sun: 566, Mon: 566, Fri: 566, Sat: 566
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:left;">
hist
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
bikes_hired
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
25887.76
</td>
<td style="text-align:right;">
9564.84
</td>
<td style="text-align:right;">
2764.0
</td>
<td style="text-align:right;">
18985.00
</td>
<td style="text-align:right;">
25730.0
</td>
<td style="text-align:right;">
32711.5
</td>
<td style="text-align:right;">
73094.0
</td>
<td style="text-align:left;">
▃▇▅▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
yday
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
183.24
</td>
<td style="text-align:right;">
106.20
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
91.00
</td>
<td style="text-align:right;">
183.0
</td>
<td style="text-align:right;">
276.0
</td>
<td style="text-align:right;">
366.0
</td>
<td style="text-align:left;">
▇▇▇▇▇
</td>
</tr>
<tr>
<td style="text-align:left;">
temp
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
11.60
</td>
<td style="text-align:right;">
5.49
</td>
<td style="text-align:right;">
-4.1
</td>
<td style="text-align:right;">
7.50
</td>
<td style="text-align:right;">
11.4
</td>
<td style="text-align:right;">
15.8
</td>
<td style="text-align:right;">
28.6
</td>
<td style="text-align:left;">
▁▆▇▅▁
</td>
</tr>
<tr>
<td style="text-align:left;">
dewp
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
7.11
</td>
<td style="text-align:right;">
4.68
</td>
<td style="text-align:right;">
-9.2
</td>
<td style="text-align:right;">
3.80
</td>
<td style="text-align:right;">
7.3
</td>
<td style="text-align:right;">
10.7
</td>
<td style="text-align:right;">
18.8
</td>
<td style="text-align:left;">
▁▃▇▇▂
</td>
</tr>
<tr>
<td style="text-align:left;">
slp
</td>
<td style="text-align:right;">
3136
</td>
<td style="text-align:right;">
0.21
</td>
<td style="text-align:right;">
1015.56
</td>
<td style="text-align:right;">
9.78
</td>
<td style="text-align:right;">
978.2
</td>
<td style="text-align:right;">
1009.85
</td>
<td style="text-align:right;">
1015.7
</td>
<td style="text-align:right;">
1021.8
</td>
<td style="text-align:right;">
1041.4
</td>
<td style="text-align:left;">
▁▂▇▇▂
</td>
</tr>
<tr>
<td style="text-align:left;">
stp
</td>
<td style="text-align:right;">
3137
</td>
<td style="text-align:right;">
0.21
</td>
<td style="text-align:right;">
106.20
</td>
<td style="text-align:right;">
285.69
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
9.22
</td>
<td style="text-align:right;">
14.6
</td>
<td style="text-align:right;">
22.0
</td>
<td style="text-align:right;">
999.7
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
visib
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
0.99
</td>
<td style="text-align:right;">
10.88
</td>
<td style="text-align:right;">
3.16
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:right;">
9.70
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:right;">
11.4
</td>
<td style="text-align:right;">
27.7
</td>
<td style="text-align:left;">
▁▇▃▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
wdsp
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
4.07
</td>
<td style="text-align:right;">
1.70
</td>
<td style="text-align:right;">
0.8
</td>
<td style="text-align:right;">
2.80
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
12.2
</td>
<td style="text-align:left;">
▅▇▃▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
mxspd
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
6.86
</td>
<td style="text-align:right;">
2.52
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
5.10
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:right;">
8.2
</td>
<td style="text-align:right;">
21.0
</td>
<td style="text-align:left;">
▅▇▂▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
gust
</td>
<td style="text-align:right;">
2633
</td>
<td style="text-align:right;">
0.33
</td>
<td style="text-align:right;">
13.21
</td>
<td style="text-align:right;">
3.31
</td>
<td style="text-align:right;">
7.2
</td>
<td style="text-align:right;">
10.80
</td>
<td style="text-align:right;">
12.4
</td>
<td style="text-align:right;">
14.9
</td>
<td style="text-align:right;">
28.3
</td>
<td style="text-align:left;">
▆▇▃▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
max_temp
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
15.72
</td>
<td style="text-align:right;">
6.49
</td>
<td style="text-align:right;">
-1.2
</td>
<td style="text-align:right;">
11.00
</td>
<td style="text-align:right;">
15.2
</td>
<td style="text-align:right;">
20.5
</td>
<td style="text-align:right;">
37.2
</td>
<td style="text-align:left;">
▂▇▇▃▁
</td>
</tr>
<tr>
<td style="text-align:left;">
min_temp
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
7.52
</td>
<td style="text-align:right;">
5.09
</td>
<td style="text-align:right;">
-9.4
</td>
<td style="text-align:right;">
3.90
</td>
<td style="text-align:right;">
7.7
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:right;">
21.7
</td>
<td style="text-align:left;">
▁▅▇▆▁
</td>
</tr>
<tr>
<td style="text-align:left;">
prcp
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.67
</td>
<td style="text-align:right;">
3.68
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
48.0
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
i_fog
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
0.68
</td>
<td style="text-align:right;">
0.47
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:left;">
▃▁▁▁▇
</td>
</tr>
<tr>
<td style="text-align:left;">
i_rain_drizzle
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
0.24
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
i_snow_ice
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.06
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
i_hail
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
0.13
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
i_thunder
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:left;">
▇▁▁▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
ea
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.05
</td>
<td style="text-align:right;">
0.33
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:right;">
0.80
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
2.2
</td>
<td style="text-align:left;">
▂▇▆▂▁
</td>
</tr>
<tr>
<td style="text-align:left;">
es
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.44
</td>
<td style="text-align:right;">
0.52
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:left;">
▆▇▃▁▁
</td>
</tr>
<tr>
<td style="text-align:left;">
rh
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.00
</td>
<td style="text-align:right;">
75.08
</td>
<td style="text-align:right;">
11.87
</td>
<td style="text-align:right;">
34.1
</td>
<td style="text-align:right;">
66.50
</td>
<td style="text-align:right;">
76.5
</td>
<td style="text-align:right;">
84.2
</td>
<td style="text-align:right;">
100.0
</td>
<td style="text-align:left;">
▁▂▆▇▃
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: POSIXct</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:left;">
min
</th>
<th style="text-align:left;">
max
</th>
<th style="text-align:left;">
median
</th>
<th style="text-align:right;">
n_unique
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
day
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2010-07-30
</td>
<td style="text-align:left;">
2021-05-31
</td>
<td style="text-align:left;">
2015-12-30
</td>
<td style="text-align:right;">
3959
</td>
</tr>
</tbody>
</table>
<div id="aesthetic-mappings" class="section level2">
<h2>Aesthetic mappings</h2>
<p>Map the column <code>day</code> onto the x axis and the column <code>temp</code> onto the y axis, and use <code>geom_line()</code> to display the data.</p>
<pre class="r"><code>ggplot(bike_weather, aes(x = day, y = temp)) +
  geom_line()</code></pre>
<p><img src="/blogs/London_bike_files/figure-html/ggplot_geom_line-1.png" width="648" style="display: block; margin: auto;" />
Try again, using <code>geom_point()</code> instead of <code>geom_line()</code>.</p>
<pre class="r"><code>ggplot(bike_weather, aes(x = day, y = temp)) +
  geom_point()</code></pre>
<p><img src="/blogs/London_bike_files/figure-html/ggplot_geom_point-1.png" width="648" style="display: block; margin: auto;" /></p>
<p>And now swap which column you map to x and which to y.</p>
<pre class="r"><code>ggplot(bike_weather, aes(x = temp, y = day)) +
  geom_point()</code></pre>
<p><img src="/blogs/London_bike_files/figure-html/ggplot_geom_point_flipped-1.png" width="648" style="display: block; margin: auto;" /></p>
</div>
<div id="ploting-distributions-of-temp" class="section level2">
<h2>Ploting distributions of <code>temp</code></h2>
<p>First, we can use histograms</p>
<pre class="r"><code>ggplot(bike_weather, aes(x = temp)) +
  geom_histogram()</code></pre>
<p><img src="/blogs/London_bike_files/figure-html/ggplot_geom_histogram-1.png" width="648" style="display: block; margin: auto;" /></p>
<p>For boxplots, we frequently want categorical data on the x or y axis. For example, we might want a separate boxplot for each month. Try this out. Put <code>month</code> on the x axis, <code>temp</code> on the y axis, and use <code>geom_boxplot()</code>.</p>
<pre class="r"><code>ggplot(bike_weather, aes(x = month, y = temp)) +
  geom_boxplot()</code></pre>
<p><img src="/blogs/London_bike_files/figure-html/ggplot_geom_boxplot1-1.png" width="648" style="display: block; margin: auto;" /></p>
</div>
<div id="adding-colour" class="section level2">
<h2>Adding colour</h2>
<p>Make a scatter plot of <code>temp</code> against <code>day</code>, using the <code>colour</code> aesthetic to colour points by month.</p>
<pre class="r"><code>ggplot(bike_weather, aes(x = day, y = temp, colour=month)) +
  geom_point()</code></pre>
<p><img src="/blogs/London_bike_files/figure-html/ggplot_geom_point_colour-1.png" width="648" style="display: block; margin: auto;" /></p>
</div>
<div id="using-the-fill-aesthetic" class="section level2">
<h2>Using the <code>fill</code> aesthetic</h2>
<p>Some geoms use a <code>fill</code> aesthetic, which is similar to <code>colour</code> but applies to shaded areas, whereas the <code>colour</code> aesthetic applies to lines and points. For example, we can use the <code>fill</code> aesthetic with <code>geom_boxplot()</code> to colour the interior of the box. Try this yourself. Plot <code>month</code> on x, <code>temp</code> on y, and colour the interior of the box by the month.</p>
<pre class="r"><code>ggplot(bike_weather, aes(x = month, y = temp, colour=month)) +
  geom_boxplot()</code></pre>
<p><img src="/blogs/London_bike_files/figure-html/ggplot_geom_boxplot2-1.png" width="648" style="display: block; margin: auto;" /></p>
</div>
